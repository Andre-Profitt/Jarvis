<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JARVIS ‚Äî Premium AI Assistant</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Premium color palette inspired by Perplexity and modern design */
            --primary: #3B82F6;
            --primary-dark: #2563EB;
            --primary-light: #60A5FA;
            --secondary: #8B5CF6;
            --accent: #EC4899;
            
            --text-primary: #0F172A;
            --text-secondary: #475569;
            --text-tertiary: #94A3B8;
            
            --bg-primary: #FFFFFF;
            --bg-secondary: #F8FAFC;
            --bg-tertiary: #F1F5F9;
            --bg-card: #FFFFFF;
            
            --border: #E2E8F0;
            --border-light: #F1F5F9;
            
            --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-full: 9999px;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            height: 100vh;
            overflow: hidden;
        }

        /* Main Layout */
        .app-container {
            display: flex;
            height: 100vh;
            background: var(--bg-primary);
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 16px;
        }

        .new-chat-btn {
            width: 100%;
            margin-top: 16px;
            padding: 12px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .new-chat-btn:hover {
            background: var(--bg-tertiary);
            box-shadow: var(--shadow-sm);
        }

        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        .sidebar-section {
            margin-bottom: 24px;
        }

        .sidebar-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 12px;
        }

        .chat-history-item {
            padding: 10px 12px;
            border-radius: var(--radius-md);
            font-size: 14px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .chat-history-item:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .chat-history-item.active {
            background: var(--bg-tertiary);
            color: var(--primary);
            font-weight: 500;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-primary);
        }

        /* Header */
        .header {
            height: 60px;
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .model-selector {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-full);
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .model-selector:hover {
            background: var(--bg-tertiary);
            box-shadow: var(--shadow-sm);
        }

        .model-badge {
            display: inline-flex;
            align-items: center;
            padding: 2px 8px;
            background: var(--primary);
            color: white;
            font-size: 11px;
            font-weight: 600;
            border-radius: var(--radius-full);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Chat Area */
        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 40px 0;
        }

        .chat-inner {
            max-width: 740px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Welcome Screen */
        .welcome-screen {
            text-align: center;
            padding: 60px 20px;
        }

        .welcome-title {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 16px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .welcome-subtitle {
            font-size: 18px;
            color: var(--text-secondary);
            margin-bottom: 48px;
        }

        .example-prompts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 48px;
        }

        .example-prompt {
            padding: 16px 20px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }

        .example-prompt:hover {
            background: var(--bg-tertiary);
            border-color: var(--primary);
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .example-prompt-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .example-prompt-text {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }

        /* Messages */
        .message {
            margin-bottom: 32px;
            animation: messageSlideIn 0.3s ease;
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message-wrapper {
            display: flex;
            gap: 16px;
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            flex-shrink: 0;
        }

        .user-avatar {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .assistant-avatar {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
        }

        .message-content {
            flex: 1;
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .message-author {
            font-weight: 600;
            font-size: 14px;
        }

        .message-time {
            font-size: 12px;
            color: var(--text-tertiary);
        }

        .message-text {
            font-size: 15px;
            line-height: 1.6;
            color: var(--text-primary);
        }

        /* Source Citations */
        .sources {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
        }

        .sources-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .source-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .source-item {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-full);
            font-size: 13px;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.2s;
        }

        .source-item:hover {
            background: var(--bg-tertiary);
            border-color: var(--primary);
            color: var(--primary);
        }

        .source-icon {
            width: 16px;
            height: 16px;
            border-radius: var(--radius-sm);
        }

        /* Progress Indicator */
        .progress-indicator {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            margin-bottom: 16px;
            animation: progressFadeIn 0.3s ease;
        }

        @keyframes progressFadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .progress-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .progress-text {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Input Area */
        .input-container {
            background: var(--bg-primary);
            border-top: 1px solid var(--border);
            padding: 20px;
        }

        .input-wrapper {
            max-width: 740px;
            margin: 0 auto;
            position: relative;
        }

        .input-field {
            width: 100%;
            padding: 16px 140px 16px 20px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-xl);
            font-size: 15px;
            font-family: inherit;
            color: var(--text-primary);
            resize: none;
            outline: none;
            transition: all 0.2s;
            min-height: 56px;
            max-height: 200px;
        }

        .input-field:focus {
            background: var(--bg-primary);
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .input-field::placeholder {
            color: var(--text-tertiary);
        }

        .input-actions {
            position: absolute;
            right: 8px;
            bottom: 8px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .input-button {
            width: 40px;
            height: 40px;
            border: none;
            background: transparent;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-tertiary);
        }

        .input-button:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .input-button.primary {
            background: var(--primary);
            color: white;
        }

        .input-button.primary:hover {
            background: var(--primary-dark);
        }

        .input-button.primary:disabled {
            background: var(--bg-tertiary);
            color: var(--text-tertiary);
            cursor: not-allowed;
        }

        /* Follow-up Suggestions */
        .follow-up-suggestions {
            margin-top: 16px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .follow-up-chip {
            padding: 8px 16px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-full);
            font-size: 14px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .follow-up-chip:hover {
            background: var(--bg-secondary);
            border-color: var(--primary);
            color: var(--primary);
        }

        /* Pro Search Toggle */
        .pro-search-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 4px 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: var(--radius-full);
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 12px;
        }

        .pro-search-toggle.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .pro-badge {
            padding: 2px 6px;
            background: var(--secondary);
            color: white;
            font-size: 10px;
            font-weight: 700;
            border-radius: var(--radius-sm);
            text-transform: uppercase;
        }

        /* SVG Icons */
        .icon {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }
            
            .example-prompts {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">J</div>
                    <span>JARVIS</span>
                </div>
                <button class="new-chat-btn">
                    <svg class="icon" viewBox="0 0 24 24" style="width: 16px; height: 16px;">
                        <path d="M12 5v14m-7-7h14"/>
                    </svg>
                    New chat
                </button>
            </div>
            <div class="sidebar-content">
                <div class="sidebar-section">
                    <div class="sidebar-title">Today</div>
                    <div class="chat-history-item active">Weather and calendar check</div>
                    <div class="chat-history-item">Python code review</div>
                    <div class="chat-history-item">Email draft assistance</div>
                </div>
                <div class="sidebar-section">
                    <div class="sidebar-title">Yesterday</div>
                    <div class="chat-history-item">Market analysis report</div>
                    <div class="chat-history-item">Travel planning for conference</div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <div class="model-selector">
                        <span>Model: GPT-4 + Gemini</span>
                        <div class="model-badge">Pro</div>
                        <svg class="icon" viewBox="0 0 24 24" style="width: 16px; height: 16px;">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                </div>
                <div class="header-right">
                    <button class="input-button">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
                        </svg>
                    </button>
                </div>
            </header>

            <!-- Chat Container -->
            <div class="chat-container" id="chat-container">
                <div class="chat-inner" id="chat-messages">
                    <!-- Welcome Screen -->
                    <div class="welcome-screen" id="welcome-screen">
                        <h1 class="welcome-title">Welcome to JARVIS</h1>
                        <p class="welcome-subtitle">Your premium AI assistant with real-time knowledge</p>
                        
                        <div class="example-prompts">
                            <div class="example-prompt" onclick="sendPrompt('What\'s happening in AI today?')">
                                <div class="example-prompt-icon">üåê</div>
                                <div class="example-prompt-text">What's happening in AI today?</div>
                            </div>
                            <div class="example-prompt" onclick="sendPrompt('Help me write Python code for data analysis')">
                                <div class="example-prompt-icon">üíª</div>
                                <div class="example-prompt-text">Help me write Python code</div>
                            </div>
                            <div class="example-prompt" onclick="sendPrompt('Explain quantum computing simply')">
                                <div class="example-prompt-icon">üß†</div>
                                <div class="example-prompt-text">Explain quantum computing</div>
                            </div>
                            <div class="example-prompt" onclick="sendPrompt('Create a marketing strategy')">
                                <div class="example-prompt-icon">üìà</div>
                                <div class="example-prompt-text">Create a marketing strategy</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="input-container">
                <div class="input-wrapper">
                    <div class="pro-search-toggle" id="pro-toggle">
                        <svg class="icon" viewBox="0 0 24 24" style="width: 16px; height: 16px;">
                            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                        <span>Pro Search</span>
                        <span class="pro-badge">PRO</span>
                    </div>
                    <textarea 
                        class="input-field" 
                        id="message-input" 
                        placeholder="Ask JARVIS anything..."
                        rows="1"
                    ></textarea>
                    <div class="input-actions">
                        <button class="input-button" title="Attach file">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"/>
                            </svg>
                        </button>
                        <button class="input-button" title="Voice input">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                            </svg>
                        </button>
                        <button class="input-button primary" id="send-button" title="Send message">
                            <svg class="icon" viewBox="0 0 24 24" fill="white" stroke="white">
                                <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        let proSearchActive = false;
        let conversationStarted = false;

        // DOM Elements
        const chatContainer = document.getElementById('chat-container');
        const chatMessages = document.getElementById('chat-messages');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const proToggle = document.getElementById('pro-toggle');
        const welcomeScreen = document.getElementById('welcome-screen');

        // Auto-resize textarea
        messageInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = this.scrollHeight + 'px';
            
            // Enable/disable send button
            sendButton.disabled = this.value.trim().length === 0;
        });

        // Send message on Enter
        messageInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Send button click
        sendButton.addEventListener('click', sendMessage);

        // Pro Search toggle
        proToggle.addEventListener('click', function() {
            proSearchActive = !proSearchActive;
            this.classList.toggle('active');
        });

        // Send prompt from example
        function sendPrompt(prompt) {
            messageInput.value = prompt;
            sendMessage();
        }

        // Send message
        function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            // Hide welcome screen on first message
            if (!conversationStarted) {
                welcomeScreen.style.display = 'none';
                conversationStarted = true;
            }

            // Add user message
            addMessage('user', message);

            // Clear input
            messageInput.value = '';
            messageInput.style.height = 'auto';
            sendButton.disabled = true;

            // Show progress indicator
            if (proSearchActive) {
                showProgress('Searching the web...');
                setTimeout(() => showProgress('Analyzing 12 sources...'), 1000);
                setTimeout(() => showProgress('Synthesizing information...'), 2000);
            } else {
                showProgress('Thinking...');
            }

            // Simulate response
            setTimeout(() => {
                hideProgress();
                
                let response;
                const sources = [];
                
                if (message.toLowerCase().includes('ai today') || message.toLowerCase().includes('happening')) {
                    response = "Here are the latest developments in AI today:\n\n**OpenAI Updates**: GPT-4 has received performance improvements with 2x faster response times and enhanced reasoning capabilities.\n\n**Google's Gemini**: Google announced Gemini 1.5 Pro now supports 2 million token context windows, the largest available in any commercial model.\n\n**Industry News**: Several major companies including Apple and Meta have announced new AI initiatives, focusing on on-device processing and privacy-preserving AI.\n\n**Research Breakthroughs**: New papers from MIT and Stanford show promising advances in AI efficiency, reducing computational requirements by up to 40%.";
                    
                    if (proSearchActive) {
                        sources.push(
                            { name: 'TechCrunch', url: '#', icon: 'üîó' },
                            { name: 'The Verge', url: '#', icon: 'üîó' },
                            { name: 'ArXiv Papers', url: '#', icon: 'üìÑ' },
                            { name: 'Google Blog', url: '#', icon: 'üîó' }
                        );
                    }
                } else if (message.toLowerCase().includes('python') || message.toLowerCase().includes('code')) {
                    response = "I'll help you write Python code for data analysis. Here's a comprehensive example:\n\n```python\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Load and explore data\ndf = pd.read_csv('data.csv')\nprint(df.head())\nprint(df.info())\n\n# Data cleaning\ndf = df.dropna()\ndf = df[df['value'] > 0]\n\n# Statistical analysis\nsummary = df.describe()\ncorrelation = df.corr()\n\n# Visualization\nplt.figure(figsize=(10, 6))\nsns.heatmap(correlation, annot=True, cmap='coolwarm')\nplt.title('Correlation Matrix')\nplt.show()\n```\n\nThis code provides a foundation for data analysis including loading, cleaning, analyzing, and visualizing your data.";
                } else {
                    response = "I understand your question. Based on my analysis, here's what I found:\n\nYour query touches on an interesting topic. Let me provide you with comprehensive information that addresses your needs.\n\nI can help you explore this further with specific examples, detailed explanations, or practical applications. What aspect would you like me to focus on?";
                }
                
                addMessage('assistant', response, sources);
                
                // Add follow-up suggestions
                showFollowUpSuggestions();
                
            }, proSearchActive ? 3000 : 1500);
        }

        // Add message to chat
        function addMessage(role, content, sources = []) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            
            const time = new Date().toLocaleTimeString('en-US', { 
                hour: 'numeric', 
                minute: '2-digit',
                hour12: true 
            });
            
            let sourcesHtml = '';
            if (sources.length > 0) {
                sourcesHtml = `
                    <div class="sources">
                        <div class="sources-title">Sources</div>
                        <div class="source-list">
                            ${sources.map(source => `
                                <a href="${source.url}" class="source-item">
                                    <span>${source.icon}</span>
                                    <span>${source.name}</span>
                                </a>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            messageDiv.innerHTML = `
                <div class="message-wrapper">
                    <div class="message-avatar ${role}-avatar">
                        ${role === 'user' ? 'U' : 'J'}
                    </div>
                    <div class="message-content">
                        <div class="message-header">
                            <span class="message-author">${role === 'user' ? 'You' : 'JARVIS'}</span>
                            <span class="message-time">${time}</span>
                        </div>
                        <div class="message-text">${formatMessage(content)}</div>
                        ${sourcesHtml}
                    </div>
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Format message with code blocks
        function formatMessage(content) {
            // Simple code block formatting
            return content.replace(/```(\w+)?\n([\s\S]*?)```/g, (match, lang, code) => {
                return `<pre style="background: var(--bg-secondary); padding: 16px; border-radius: var(--radius-md); overflow-x: auto; margin: 16px 0;"><code>${escapeHtml(code.trim())}</code></pre>`;
            }).replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
              .replace(/\n/g, '<br>');
        }

        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, m => map[m]);
        }

        // Progress indicator
        let progressDiv = null;

        function showProgress(text) {
            hideProgress();
            
            progressDiv = document.createElement('div');
            progressDiv.className = 'message';
            progressDiv.innerHTML = `
                <div class="message-wrapper">
                    <div class="message-avatar assistant-avatar">J</div>
                    <div class="message-content">
                        <div class="progress-indicator">
                            <div class="progress-spinner"></div>
                            <div class="progress-text">${text}</div>
                        </div>
                    </div>
                </div>
            `;
            
            chatMessages.appendChild(progressDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function hideProgress() {
            if (progressDiv) {
                progressDiv.remove();
                progressDiv = null;
            }
        }

        // Follow-up suggestions
        function showFollowUpSuggestions() {
            const suggestions = [
                "Tell me more about this",
                "Show examples",
                "What are the alternatives?",
                "How does this compare to other solutions?"
            ];
            
            const suggestionsDiv = document.createElement('div');
            suggestionsDiv.className = 'follow-up-suggestions';
            suggestionsDiv.style.marginLeft = '52px';
            suggestionsDiv.style.marginBottom = '20px';
            
            suggestions.forEach(suggestion => {
                const chip = document.createElement('button');
                chip.className = 'follow-up-chip';
                chip.textContent = suggestion;
                chip.onclick = () => sendPrompt(suggestion);
                suggestionsDiv.appendChild(chip);
            });
            
            chatMessages.appendChild(suggestionsDiv);
        }

        // Initialize
        sendButton.disabled = true;
    </script>
</body>
</html>